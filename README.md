Contextual Pattern Matching
===

How to use
----------

### Installation


Before compiling and running, please install [sdsl](https://github.com/simongog/sdsl-lite/tree/master).
```bash
./pre-install.sh
```
### External Memory

Install  [psascan](https://www.cs.helsinki.fi/group/pads/LCPscan.html), [EM-SparsePhi-0.2.0](https://www.cs.helsinki.fi/group/pads/better_em_laca.html) and [stxxl](https://stxxl.org/tags/1.4.1/index.html).


make command:
```bash
make run_EM
```
Running:
```bash
 ./run_EM -f input.txt -x 1 -y 1 -m 2 -i index -r 1024
```
The `-f` option determines the input file path;  
The `-x` and `-y` option determine the length of context X and Y.  
The `-m` option determines the length of pattern P in the mining algorithm.  
The `-i` option determines the name of output index generated by psascan and EM-SparsePhi-0.2.0.  
The `-r` option determines the usage of RAM (Mi).  


### Counting
make command:
```bash
make run_counting
```
Running:
```bash
 ./run_counting -f input.txt -p pattern.txt -x 1 -y 2
```
The `-f` option determines the input file path;   
The `-p` option determines the pattern file path of P in the given P algorithm.  
The `-l` option determines the length of the context.  
The `-x` and `-y` option determine the length of context X and Y.    


### Test counting code
```bash
make run_test_counting
```
Running:
```bash
 ./run_test_counting -L 5 -R 100 -r 1000000
```
The `-L` option determines the minimal length of randomly generated text string;  
The `-R` option determines the maximal length of randomly generated text string.  
The `-r` option determines the number of test rounds.  


### Baseline

```bash

 ./CPM -f input.txt -p pattern.txt -l 2 -m 3
```
The `-f` option determines the input file path;   
The `-p` option determines the pattern file path of P in the given P algorithm.  
The `-l` option determines the length of the context.  
The `-m` option determines the length of pattern P in the mining algorithm.  




### Test the correctness
If you would like to compile the test.cpp to test the consistence between the results of the baseline and naive checker we implemented:
```bash
make -f Makefile.32-bit.gcc run_test
```
or:
```bash
make -f Makefile.64-bit.gcc run_test
```
Then:
```bash
./run_test -L 3 -R 2000 -r 100000

```
The `-L` option determines the minimal length of randomly generated text string;  
The `-R` option determines the maximal length of randomly generated text string.  
The `-r` option determines the number of test rounds.  



Once the inconsistency is found, the specific string and their results will be printed.


This program is distributed in the hope that it will be useful, but WITHOUT ANY WARRANTY; without even the implied warranty of
MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU General Public License for more details.

You should have received a copy of the GNU General Public License along with this program.  If not, see <http://www.gnu.org/licenses/>.